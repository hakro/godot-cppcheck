
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Cppcheck - HTML report - Godot-master</title>
    <link rel="stylesheet" href="style.css">
    <style>
pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #ffffff; }
.highlight .c { color: #888888 } /* Comment */
.highlight .err { color: #FF0000; background-color: #FFAAAA } /* Error */
.highlight .k { color: #008800; font-weight: bold } /* Keyword */
.highlight .o { color: #333333 } /* Operator */
.highlight .ch { color: #888888 } /* Comment.Hashbang */
.highlight .cm { color: #888888 } /* Comment.Multiline */
.highlight .cp { color: #557799 } /* Comment.Preproc */
.highlight .cpf { color: #888888 } /* Comment.PreprocFile */
.highlight .c1 { color: #888888 } /* Comment.Single */
.highlight .cs { color: #cc0000; font-weight: bold } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #c65d09; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008800; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008800; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008800; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #003388; font-weight: bold } /* Keyword.Pseudo */
.highlight .kr { color: #008800; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #333399; font-weight: bold } /* Keyword.Type */
.highlight .m { color: #6600EE; font-weight: bold } /* Literal.Number */
.highlight .s { background-color: #fff0f0 } /* Literal.String */
.highlight .na { color: #0000CC } /* Name.Attribute */
.highlight .nb { color: #007020 } /* Name.Builtin */
.highlight .nc { color: #BB0066; font-weight: bold } /* Name.Class */
.highlight .no { color: #003366; font-weight: bold } /* Name.Constant */
.highlight .nd { color: #555555; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #880000; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #FF0000; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0066BB; font-weight: bold } /* Name.Function */
.highlight .nl { color: #997700; font-weight: bold } /* Name.Label */
.highlight .nn { color: #0e84b5; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #007700 } /* Name.Tag */
.highlight .nv { color: #996633 } /* Name.Variable */
.highlight .ow { color: #000000; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #6600EE; font-weight: bold } /* Literal.Number.Bin */
.highlight .mf { color: #6600EE; font-weight: bold } /* Literal.Number.Float */
.highlight .mh { color: #005588; font-weight: bold } /* Literal.Number.Hex */
.highlight .mi { color: #0000DD; font-weight: bold } /* Literal.Number.Integer */
.highlight .mo { color: #4400EE; font-weight: bold } /* Literal.Number.Oct */
.highlight .sa { background-color: #fff0f0 } /* Literal.String.Affix */
.highlight .sb { background-color: #fff0f0 } /* Literal.String.Backtick */
.highlight .sc { color: #0044DD } /* Literal.String.Char */
.highlight .dl { background-color: #fff0f0 } /* Literal.String.Delimiter */
.highlight .sd { color: #DD4422 } /* Literal.String.Doc */
.highlight .s2 { background-color: #fff0f0 } /* Literal.String.Double */
.highlight .se { color: #666666; font-weight: bold; background-color: #fff0f0 } /* Literal.String.Escape */
.highlight .sh { background-color: #fff0f0 } /* Literal.String.Heredoc */
.highlight .si { background-color: #eeeeee } /* Literal.String.Interpol */
.highlight .sx { color: #DD2200; background-color: #fff0f0 } /* Literal.String.Other */
.highlight .sr { color: #000000; background-color: #fff0ff } /* Literal.String.Regex */
.highlight .s1 { background-color: #fff0f0 } /* Literal.String.Single */
.highlight .ss { color: #AA6600 } /* Literal.String.Symbol */
.highlight .bp { color: #007020 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0066BB; font-weight: bold } /* Name.Function.Magic */
.highlight .vc { color: #336699 } /* Name.Variable.Class */
.highlight .vg { color: #dd7700; font-weight: bold } /* Name.Variable.Global */
.highlight .vi { color: #3333BB } /* Name.Variable.Instance */
.highlight .vm { color: #996633 } /* Name.Variable.Magic */
.highlight .il { color: #0000DD; font-weight: bold } /* Literal.Number.Integer.Long */
    </style>
    <script>
      function getStyle(el, styleProp) {
        var y;

        if (el.currentStyle) {
          y = el.currentStyle[styleProp];
        } else if (window.getComputedStyle) {
          y = document.defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);
        }

        return y;
      }

      function toggle() {
        var el = this.expandable_content;
        var mark = this.expandable_marker;

        if (el.style.display === "block") {
          el.style.display = "none";
          mark.textContent = "[+]";
        } else {
          el.style.display = "block";
          mark.textContent = "[-]";
        }
      }

      function initExpandables() {
        var elements = document.querySelectorAll(".expandable");

        for (var i = 0, len = elements.length; i < len; i++) {
          var el = elements[i];
          var clickable = el.querySelector("span");
          var marker = clickable.querySelector(".marker");
          var content = el.querySelector(".content");
          var width = clickable.clientWidth - parseInt(getStyle(content, "padding-left")) - parseInt(getStyle(content, "padding-right"));
          content.style.width = width + "px";
          clickable.expandable_content = content;
          clickable.expandable_marker = marker;
          clickable.addEventListener("click", toggle);
        }
      }

      function toggleDisplay(cb) {
        var elements = document.querySelectorAll("." + cb.id);

        for (var i = 0, len = elements.length; i < len; i++) {
          elements[i].classList.toggle("id-filtered", !cb.checked);
        }

        updateFileRows();
      }

      function toggleSeverity(cb) {
        cb.parentElement.classList.toggle("unchecked", !cb.checked);
        var elements = document.querySelectorAll(".sev_" + cb.id);

        for (var i = 0, len = elements.length; i < len; i++) {
          elements[i].classList.toggle("severity-filtered", !cb.checked);
        }

        updateFileRows();
      }

      function toggleTool(cb) {
        cb.parentElement.classList.toggle("unchecked", !cb.checked);

        var elements;
        if (cb.id == "clang-tidy")
            elements = document.querySelectorAll("[class^=clang-tidy-]");
        else
            elements = document.querySelectorAll(".issue:not([class^=clang-tidy-])");

        for (var i = 0, len = elements.length; i < len; i++) {
          elements[i].classList.toggle("tool-filtered", !cb.checked);
        }

        updateFileRows();
      }

      function toggleAll() {
        var elements = document.querySelectorAll(".idToggle");

        // starting from 1 since 0 is the "toggle all" input
        for (var i = 1, len = elements.length; i < len; i++) {
          var changed = elements[i].checked != elements[0].checked;
          if (changed) {
            elements[i].checked = elements[0].checked;
            toggleDisplay(elements[i]);
          }
        }
      }

      function filterFile(filter) {
        var elements = document.querySelectorAll(".fileEntry");

        for (var i = 0, len = elements.length; i < len; i++) {
          var visible = elements[i].querySelector("tr").querySelector("td").textContent.toLowerCase().includes(filter.toLowerCase());
          elements[i].classList.toggle("text-filtered", !visible);
        }
      }

      function filterText(text) {
        filter = text.toLowerCase();
        var elements = document.querySelectorAll(".issue");

        for (var i = 0, len = elements.length; i < len; i++) {
          var visible = false;
          var fields = elements[i].querySelectorAll("td");
          for (var n = 0, num = fields.length; n < num; n++) {
            if (fields[n].textContent.toLowerCase().includes(filter)) {
              visible = true;
              break;
            }
          }
          elements[i].classList.toggle("text-filtered", !visible);
        }

        updateFileRows();
      }

      function updateFileRows(element) {
        var elements = document.querySelectorAll(".fileEntry");

        for (var i = 0, len = elements.length; i < len; i++) {
          var visible = elements[i].querySelector(".issue:not(.id-filtered):not(.severity-filtered):not(.tool-filtered):not(.text-filtered)");
          elements[i].classList.toggle("file-filtered", !visible);
        }
      }

      window.addEventListener("load", initExpandables);
    </script>
  </head>
  <body>
    <div id="wrapper">
    <div id="header" class="header">
      <h1>Cppcheck report - Godot-master: thirdparty/jpeg-compressor/jpgd.h</h1>

    </div>

    <div id="menu">
     <p><a href="index.html">Defects:</a> jpgd.h</p>
<a href="483.html#line-72"> missingOverride 72</a><a href="483.html#line-72"> missingOverride 72</a><a href="483.html#line-91"> missingOverride 91</a><a href="483.html#line-109"> missingOverride 109</a><a href="483.html#line-135"> noExplicitConstructor 135</a><a href="483.html#line-338"> shiftTooManyBitsSigned 338</a>
    </div>
    <div id="content">
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><a id="line-1" name="line-1"></a><span class="c1">// jpgd.h - C++ class for JPEG decompression.</span>
<a id="line-2" name="line-2"></a><span class="c1">// Richard Geldreich &lt;richgel99@gmail.com&gt;</span>
<a id="line-3" name="line-3"></a><span class="c1">// See jpgd.cpp for license (Public Domain or Apache 2.0).</span>
<a id="line-4" name="line-4"></a><span class="cp">#ifndef JPEG_DECODER_H</span>
<a id="line-5" name="line-5"></a><span class="cp">#define JPEG_DECODER_H</span>
<a id="line-6" name="line-6"></a>
<a id="line-7" name="line-7"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<a id="line-8" name="line-8"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<a id="line-9" name="line-9"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;setjmp.h&gt;</span><span class="cp"></span>
<a id="line-10" name="line-10"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;assert.h&gt;</span><span class="cp"></span>
<a id="line-11" name="line-11"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdint.h&gt;</span><span class="cp"></span>
<a id="line-12" name="line-12"></a>
<a id="line-13" name="line-13"></a><span class="cp">#ifdef _MSC_VER</span>
<a id="line-14" name="line-14"></a><span class="cp">#define JPGD_NORETURN __declspec(noreturn) </span>
<a id="line-15" name="line-15"></a><span class="cp">#elif defined(__GNUC__)</span>
<a id="line-16" name="line-16"></a><span class="cp">#define JPGD_NORETURN __attribute__ ((noreturn))</span>
<a id="line-17" name="line-17"></a><span class="cp">#else</span>
<a id="line-18" name="line-18"></a><span class="cp">#define JPGD_NORETURN</span>
<a id="line-19" name="line-19"></a><span class="cp">#endif</span>
<a id="line-20" name="line-20"></a>
<a id="line-21" name="line-21"></a><span class="cp">#define JPGD_HUFF_TREE_MAX_LENGTH 512</span>
<a id="line-22" name="line-22"></a><span class="cp">#define JPGD_HUFF_CODE_SIZE_MAX_LENGTH 256</span>
<a id="line-23" name="line-23"></a>
<a id="line-24" name="line-24"></a><span class="n">namespace</span><span class="w"> </span><span class="n">jpgd</span><span class="w"></span>
<a id="line-25" name="line-25"></a><span class="p">{</span><span class="w"></span>
<a id="line-26" name="line-26"></a><span class="w">	</span><span class="k">typedef</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w">  </span><span class="n">uint8</span><span class="p">;</span><span class="w"></span>
<a id="line-27" name="line-27"></a><span class="w">	</span><span class="k">typedef</span><span class="w">   </span><span class="kt">signed</span><span class="w"> </span><span class="kt">short</span><span class="w"> </span><span class="n">int16</span><span class="p">;</span><span class="w"></span>
<a id="line-28" name="line-28"></a><span class="w">	</span><span class="k">typedef</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">short</span><span class="w"> </span><span class="n">uint16</span><span class="p">;</span><span class="w"></span>
<a id="line-29" name="line-29"></a><span class="w">	</span><span class="k">typedef</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w">   </span><span class="n">uint</span><span class="p">;</span><span class="w"></span>
<a id="line-30" name="line-30"></a><span class="w">	</span><span class="k">typedef</span><span class="w">   </span><span class="kt">signed</span><span class="w"> </span><span class="kt">int</span><span class="w">   </span><span class="n">int32</span><span class="p">;</span><span class="w"></span>
<a id="line-31" name="line-31"></a>
<a id="line-32" name="line-32"></a><span class="w">	</span><span class="c1">// Loads a JPEG image from a memory buffer or a file.</span>
<a id="line-33" name="line-33"></a><span class="w">	</span><span class="c1">// req_comps can be 1 (grayscale), 3 (RGB), or 4 (RGBA).</span>
<a id="line-34" name="line-34"></a><span class="w">	</span><span class="c1">// On return, width/height will be set to the image&#39;s dimensions, and actual_comps will be set to the either 1 (grayscale) or 3 (RGB).</span>
<a id="line-35" name="line-35"></a><span class="w">	</span><span class="c1">// Notes: For more control over where and how the source data is read, see the decompress_jpeg_image_from_stream() function below, or call the jpeg_decoder class directly.</span>
<a id="line-36" name="line-36"></a><span class="w">	</span><span class="c1">// Requesting a 8 or 32bpp image is currently a little faster than 24bpp because the jpeg_decoder class itself currently always unpacks to either 8 or 32bpp.</span>
<a id="line-37" name="line-37"></a><span class="w">	</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">decompress_jpeg_image_from_memory</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pSrc_data</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">src_data_size</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">actual_comps</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">req_comps</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a id="line-38" name="line-38"></a><span class="w">	</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">decompress_jpeg_image_from_file</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">pSrc_filename</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">actual_comps</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">req_comps</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a id="line-39" name="line-39"></a>
<a id="line-40" name="line-40"></a><span class="w">	</span><span class="c1">// Success/failure error codes.</span>
<a id="line-41" name="line-41"></a><span class="w">	</span><span class="k">enum</span><span class="w"> </span><span class="n">jpgd_status</span><span class="w"></span>
<a id="line-42" name="line-42"></a><span class="w">	</span><span class="p">{</span><span class="w"></span>
<a id="line-43" name="line-43"></a><span class="w">		</span><span class="n">JPGD_SUCCESS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_FAILED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_DONE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"></span>
<a id="line-44" name="line-44"></a><span class="w">		</span><span class="n">JPGD_BAD_DHT_COUNTS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">-256</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_DHT_INDEX</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_DHT_MARKER</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_DQT_MARKER</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_DQT_TABLE</span><span class="p">,</span><span class="w"></span>
<a id="line-45" name="line-45"></a><span class="w">		</span><span class="n">JPGD_BAD_PRECISION</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_HEIGHT</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_WIDTH</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_TOO_MANY_COMPONENTS</span><span class="p">,</span><span class="w"></span>
<a id="line-46" name="line-46"></a><span class="w">		</span><span class="n">JPGD_BAD_SOF_LENGTH</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_VARIABLE_MARKER</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_DRI_LENGTH</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_SOS_LENGTH</span><span class="p">,</span><span class="w"></span>
<a id="line-47" name="line-47"></a><span class="w">		</span><span class="n">JPGD_BAD_SOS_COMP_ID</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_W_EXTRA_BYTES_BEFORE_MARKER</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_NO_ARITHMITIC_SUPPORT</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_UNEXPECTED_MARKER</span><span class="p">,</span><span class="w"></span>
<a id="line-48" name="line-48"></a><span class="w">		</span><span class="n">JPGD_NOT_JPEG</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_UNSUPPORTED_MARKER</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_DQT_LENGTH</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_TOO_MANY_BLOCKS</span><span class="p">,</span><span class="w"></span>
<a id="line-49" name="line-49"></a><span class="w">		</span><span class="n">JPGD_UNDEFINED_QUANT_TABLE</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_UNDEFINED_HUFF_TABLE</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_NOT_SINGLE_SCAN</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_UNSUPPORTED_COLORSPACE</span><span class="p">,</span><span class="w"></span>
<a id="line-50" name="line-50"></a><span class="w">		</span><span class="n">JPGD_UNSUPPORTED_SAMP_FACTORS</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_DECODE_ERROR</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_RESTART_MARKER</span><span class="p">,</span><span class="w"></span>
<a id="line-51" name="line-51"></a><span class="w">		</span><span class="n">JPGD_BAD_SOS_SPECTRAL</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_BAD_SOS_SUCCESSIVE</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_STREAM_READ</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_NOTENOUGHMEM</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_TOO_MANY_SCANS</span><span class="w"></span>
<a id="line-52" name="line-52"></a><span class="w">	</span><span class="p">};</span><span class="w"></span>
<a id="line-53" name="line-53"></a>
<a id="line-54" name="line-54"></a><span class="w">	</span><span class="c1">// Input stream interface.</span>
<a id="line-55" name="line-55"></a><span class="w">	</span><span class="c1">// Derive from this class to read input data from sources other than files or memory. Set m_eof_flag to true when no more data is available.</span>
<a id="line-56" name="line-56"></a><span class="w">	</span><span class="c1">// The decoder is rather greedy: it will keep on calling this method until its internal input buffer is full, or until the EOF flag is set.</span>
<a id="line-57" name="line-57"></a><span class="w">	</span><span class="c1">// It the input stream contains data after the JPEG stream&#39;s EOI (end of image) marker it will probably be pulled into the internal buffer.</span>
<a id="line-58" name="line-58"></a><span class="w">	</span><span class="c1">// Call the get_total_bytes_read() method to determine the actual size of the JPEG stream after successful decoding.</span>
<a id="line-59" name="line-59"></a><span class="w">	</span><span class="n">class</span><span class="w"> </span><span class="n">jpeg_decoder_stream</span><span class="w"></span>
<a id="line-60" name="line-60"></a><span class="w">	</span><span class="p">{</span><span class="w"></span>
<a id="line-61" name="line-61"></a><span class="w">	</span><span class="n">public</span><span class="o">:</span><span class="w"></span>
<a id="line-62" name="line-62"></a><span class="w">		</span><span class="n">jpeg_decoder_stream</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-63" name="line-63"></a><span class="w">		</span><span class="n">virtual</span><span class="w"> </span><span class="o">~</span><span class="n">jpeg_decoder_stream</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-64" name="line-64"></a>
<a id="line-65" name="line-65"></a><span class="w">		</span><span class="c1">// The read() method is called when the internal input buffer is empty.</span>
<a id="line-66" name="line-66"></a><span class="w">		</span><span class="c1">// Parameters:</span>
<a id="line-67" name="line-67"></a><span class="w">		</span><span class="c1">// pBuf - input buffer</span>
<a id="line-68" name="line-68"></a><span class="w">		</span><span class="c1">// max_bytes_to_read - maximum bytes that can be written to pBuf</span>
<a id="line-69" name="line-69"></a><span class="w">		</span><span class="c1">// pEOF_flag - set this to true if at end of stream (no more bytes remaining)</span>
<a id="line-70" name="line-70"></a><span class="w">		</span><span class="c1">// Returns -1 on error, otherwise return the number of bytes actually written to the buffer (which may be 0).</span>
<a id="line-71" name="line-71"></a><span class="w">		</span><span class="c1">// Notes: This method will be called in a loop until you set *pEOF_flag to true or the internal buffer is full.</span>
<a id="line-72" name="line-72"></a><span class="hll"><span class="w">		</span><span class="n">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">read</span><span class="p">(</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">pBuf</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">max_bytes_to_read</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="o">*</span><span class="w"> </span><span class="n">pEOF_flag</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span><span class="error2">&lt;--- Virtual function in base class</span><span class="error2">&lt;--- Virtual function in base class</span>
</span><a id="line-73" name="line-73"></a><span class="w">	</span><span class="p">};</span><span class="w"></span>
<a id="line-74" name="line-74"></a>
<a id="line-75" name="line-75"></a><span class="w">	</span><span class="c1">// stdio FILE stream class.</span>
<a id="line-76" name="line-76"></a><span class="w">	</span><span class="n">class</span><span class="w"> </span><span class="n">jpeg_decoder_file_stream</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">jpeg_decoder_stream</span><span class="w"></span>
<a id="line-77" name="line-77"></a><span class="w">	</span><span class="p">{</span><span class="w"></span>
<a id="line-78" name="line-78"></a><span class="w">		</span><span class="n">jpeg_decoder_file_stream</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">jpeg_decoder_file_stream</span><span class="o">&amp;</span><span class="p">);</span><span class="w"></span>
<a id="line-79" name="line-79"></a><span class="w">		</span><span class="n">jpeg_decoder_file_stream</span><span class="o">&amp;</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">jpeg_decoder_file_stream</span><span class="o">&amp;</span><span class="p">);</span><span class="w"></span>
<a id="line-80" name="line-80"></a>
<a id="line-81" name="line-81"></a><span class="w">		</span><span class="kt">FILE</span><span class="o">*</span><span class="w"> </span><span class="n">m_pFile</span><span class="p">;</span><span class="w"></span>
<a id="line-82" name="line-82"></a><span class="w">		</span><span class="kt">bool</span><span class="w"> </span><span class="n">m_eof_flag</span><span class="p">,</span><span class="w"> </span><span class="n">m_error_flag</span><span class="p">;</span><span class="w"></span>
<a id="line-83" name="line-83"></a>
<a id="line-84" name="line-84"></a><span class="w">	</span><span class="n">public</span><span class="o">:</span><span class="w"></span>
<a id="line-85" name="line-85"></a><span class="w">		</span><span class="n">jpeg_decoder_file_stream</span><span class="p">();</span><span class="w"></span>
<a id="line-86" name="line-86"></a><span class="w">		</span><span class="n">virtual</span><span class="w"> </span><span class="o">~</span><span class="n">jpeg_decoder_file_stream</span><span class="p">();</span><span class="w"></span>
<a id="line-87" name="line-87"></a>
<a id="line-88" name="line-88"></a><span class="w">		</span><span class="kt">bool</span><span class="w"> </span><span class="nf">open</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">Pfilename</span><span class="p">);</span><span class="w"></span>
<a id="line-89" name="line-89"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">();</span><span class="w"></span>
<a id="line-90" name="line-90"></a>
<a id="line-91" name="line-91"></a><span class="hll"><span class="w">		</span><span class="n">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">read</span><span class="p">(</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">pBuf</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">max_bytes_to_read</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="o">*</span><span class="w"> </span><span class="n">pEOF_flag</span><span class="p">);</span><span class="w"></span><span class="error2">&lt;--- Function in derived class</span>
</span><a id="line-92" name="line-92"></a><span class="w">	</span><span class="p">};</span><span class="w"></span>
<a id="line-93" name="line-93"></a>
<a id="line-94" name="line-94"></a><span class="w">	</span><span class="c1">// Memory stream class.</span>
<a id="line-95" name="line-95"></a><span class="w">	</span><span class="n">class</span><span class="w"> </span><span class="n">jpeg_decoder_mem_stream</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">public</span><span class="w"> </span><span class="n">jpeg_decoder_stream</span><span class="w"></span>
<a id="line-96" name="line-96"></a><span class="w">	</span><span class="p">{</span><span class="w"></span>
<a id="line-97" name="line-97"></a><span class="w">		</span><span class="k">const</span><span class="w"> </span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">m_pSrc_data</span><span class="p">;</span><span class="w"></span>
<a id="line-98" name="line-98"></a><span class="w">		</span><span class="n">uint</span><span class="w"> </span><span class="n">m_ofs</span><span class="p">,</span><span class="w"> </span><span class="n">m_size</span><span class="p">;</span><span class="w"></span>
<a id="line-99" name="line-99"></a>
<a id="line-100" name="line-100"></a><span class="w">	</span><span class="n">public</span><span class="o">:</span><span class="w"></span>
<a id="line-101" name="line-101"></a><span class="w">		</span><span class="n">jpeg_decoder_mem_stream</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m_pSrc_data</span><span class="p">(</span><span class="nb">NULL</span><span class="p">),</span><span class="w"> </span><span class="n">m_ofs</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">m_size</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-102" name="line-102"></a><span class="w">		</span><span class="n">jpeg_decoder_mem_stream</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">pSrc_data</span><span class="p">,</span><span class="w"> </span><span class="n">uint</span><span class="w"> </span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">m_pSrc_data</span><span class="p">(</span><span class="n">pSrc_data</span><span class="p">),</span><span class="w"> </span><span class="n">m_ofs</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">m_size</span><span class="p">(</span><span class="n">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-103" name="line-103"></a>
<a id="line-104" name="line-104"></a><span class="w">		</span><span class="n">virtual</span><span class="w"> </span><span class="o">~</span><span class="n">jpeg_decoder_mem_stream</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-105" name="line-105"></a>
<a id="line-106" name="line-106"></a><span class="w">		</span><span class="kt">bool</span><span class="w"> </span><span class="n">open</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">pSrc_data</span><span class="p">,</span><span class="w"> </span><span class="n">uint</span><span class="w"> </span><span class="n">size</span><span class="p">);</span><span class="w"></span>
<a id="line-107" name="line-107"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">m_pSrc_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"> </span><span class="n">m_ofs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">m_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-108" name="line-108"></a>
<a id="line-109" name="line-109"></a><span class="hll"><span class="w">		</span><span class="n">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">read</span><span class="p">(</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">pBuf</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">max_bytes_to_read</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="o">*</span><span class="w"> </span><span class="n">pEOF_flag</span><span class="p">);</span><span class="w"></span><span class="error2">&lt;--- Function in derived class</span>
</span><a id="line-110" name="line-110"></a><span class="w">	</span><span class="p">};</span><span class="w"></span>
<a id="line-111" name="line-111"></a>
<a id="line-112" name="line-112"></a><span class="w">	</span><span class="c1">// Loads JPEG file from a jpeg_decoder_stream.</span>
<a id="line-113" name="line-113"></a><span class="w">	</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="nf">decompress_jpeg_image_from_stream</span><span class="p">(</span><span class="n">jpeg_decoder_stream</span><span class="o">*</span><span class="w"> </span><span class="n">pStream</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">*</span><span class="w"> </span><span class="n">actual_comps</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">req_comps</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a id="line-114" name="line-114"></a>
<a id="line-115" name="line-115"></a><span class="w">	</span><span class="k">enum</span><span class="w"></span>
<a id="line-116" name="line-116"></a><span class="w">	</span><span class="p">{</span><span class="w"></span>
<a id="line-117" name="line-117"></a><span class="w">		</span><span class="n">JPGD_IN_BUF_SIZE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8192</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_MAX_BLOCKS_PER_MCU</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_MAX_HUFF_TABLES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_MAX_QUANT_TABLES</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"></span>
<a id="line-118" name="line-118"></a><span class="w">		</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_MAX_COMPS_IN_SCAN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_MAX_BLOCKS_PER_ROW</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16384</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_MAX_HEIGHT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32768</span><span class="p">,</span><span class="w"> </span><span class="n">JPGD_MAX_WIDTH</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32768</span><span class="w"></span>
<a id="line-119" name="line-119"></a><span class="w">	</span><span class="p">};</span><span class="w"></span>
<a id="line-120" name="line-120"></a>
<a id="line-121" name="line-121"></a><span class="w">	</span><span class="k">typedef</span><span class="w"> </span><span class="n">int16</span><span class="w"> </span><span class="n">jpgd_quant_t</span><span class="p">;</span><span class="w"></span>
<a id="line-122" name="line-122"></a><span class="w">	</span><span class="k">typedef</span><span class="w"> </span><span class="n">int16</span><span class="w"> </span><span class="n">jpgd_block_coeff_t</span><span class="p">;</span><span class="w"></span>
<a id="line-123" name="line-123"></a>
<a id="line-124" name="line-124"></a><span class="w">	</span><span class="n">class</span><span class="w"> </span><span class="n">jpeg_decoder</span><span class="w"></span>
<a id="line-125" name="line-125"></a><span class="w">	</span><span class="p">{</span><span class="w"></span>
<a id="line-126" name="line-126"></a><span class="w">	</span><span class="n">public</span><span class="o">:</span><span class="w"></span>
<a id="line-127" name="line-127"></a><span class="w">		</span><span class="k">enum</span><span class="w"></span>
<a id="line-128" name="line-128"></a><span class="w">		</span><span class="p">{</span><span class="w"></span>
<a id="line-129" name="line-129"></a><span class="w">			</span><span class="n">cFlagBoxChromaFiltering</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"></span>
<a id="line-130" name="line-130"></a><span class="w">			</span><span class="n">cFlagDisableSIMD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"></span>
<a id="line-131" name="line-131"></a><span class="w">		</span><span class="p">};</span><span class="w"></span>
<a id="line-132" name="line-132"></a>
<a id="line-133" name="line-133"></a><span class="w">		</span><span class="c1">// Call get_error_code() after constructing to determine if the stream is valid or not. You may call the get_width(), get_height(), etc.</span>
<a id="line-134" name="line-134"></a><span class="w">		</span><span class="c1">// methods after the constructor is called. You may then either destruct the object, or begin decoding the image by calling begin_decoding(), then decode() on each scanline.</span>
<a id="line-135" name="line-135"></a><span class="hll"><span class="w">		</span><span class="n">jpeg_decoder</span><span class="p">(</span><span class="n">jpeg_decoder_stream</span><span class="o">*</span><span class="w"> </span><span class="n">pStream</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">flags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"></span><div class="verbose expandable"><span class="error2">&lt;--- Class 'jpeg_decoder' has a constructor with 1 argument that is not explicit. <span class="marker">[+]</span></span><div class="content">Class &apos;jpeg_decoder&apos; has a constructor with 1 argument that is not explicit. Such constructors should in general be explicit for type safety reasons. Using the explicit keyword in the constructor means some mistakes when using the class can be avoided.</div></div>
</span><a id="line-136" name="line-136"></a>
<a id="line-137" name="line-137"></a><span class="w">		</span><span class="o">~</span><span class="n">jpeg_decoder</span><span class="p">();</span><span class="w"></span>
<a id="line-138" name="line-138"></a>
<a id="line-139" name="line-139"></a><span class="w">		</span><span class="c1">// Call this method after constructing the object to begin decompression.</span>
<a id="line-140" name="line-140"></a><span class="w">		</span><span class="c1">// If JPGD_SUCCESS is returned you may then call decode() on each scanline.</span>
<a id="line-141" name="line-141"></a>
<a id="line-142" name="line-142"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="nf">begin_decoding</span><span class="p">();</span><span class="w"></span>
<a id="line-143" name="line-143"></a>
<a id="line-144" name="line-144"></a><span class="w">		</span><span class="c1">// Returns the next scan line.</span>
<a id="line-145" name="line-145"></a><span class="w">		</span><span class="c1">// For grayscale images, pScan_line will point to a buffer containing 8-bit pixels (get_bytes_per_pixel() will return 1). </span>
<a id="line-146" name="line-146"></a><span class="w">		</span><span class="c1">// Otherwise, it will always point to a buffer containing 32-bit RGBA pixels (A will always be 255, and get_bytes_per_pixel() will return 4).</span>
<a id="line-147" name="line-147"></a><span class="w">		</span><span class="c1">// Returns JPGD_SUCCESS if a scan line has been returned.</span>
<a id="line-148" name="line-148"></a><span class="w">		</span><span class="c1">// Returns JPGD_DONE if all scan lines have been returned.</span>
<a id="line-149" name="line-149"></a><span class="w">		</span><span class="c1">// Returns JPGD_FAILED if an error occurred. Call get_error_code() for a more info.</span>
<a id="line-150" name="line-150"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="nf">decode</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">void</span><span class="o">**</span><span class="w"> </span><span class="n">pScan_line</span><span class="p">,</span><span class="w"> </span><span class="n">uint</span><span class="o">*</span><span class="w"> </span><span class="n">pScan_line_len</span><span class="p">);</span><span class="w"></span>
<a id="line-151" name="line-151"></a>
<a id="line-152" name="line-152"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="n">jpgd_status</span><span class="w"> </span><span class="nf">get_error_code</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_error_code</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-153" name="line-153"></a>
<a id="line-154" name="line-154"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">get_width</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_image_x_size</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-155" name="line-155"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">get_height</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_image_y_size</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-156" name="line-156"></a>
<a id="line-157" name="line-157"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">get_num_components</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_comps_in_frame</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-158" name="line-158"></a>
<a id="line-159" name="line-159"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">get_bytes_per_pixel</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_dest_bytes_per_pixel</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-160" name="line-160"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">get_bytes_per_scan_line</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_image_x_size</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">get_bytes_per_pixel</span><span class="p">();</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-161" name="line-161"></a>
<a id="line-162" name="line-162"></a><span class="w">		</span><span class="c1">// Returns the total number of bytes actually consumed by the decoder (which should equal the actual size of the JPEG file).</span>
<a id="line-163" name="line-163"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">get_total_bytes_read</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">m_total_bytes_read</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-164" name="line-164"></a>
<a id="line-165" name="line-165"></a><span class="w">	</span><span class="n">private</span><span class="o">:</span><span class="w"></span>
<a id="line-166" name="line-166"></a><span class="w">		</span><span class="n">jpeg_decoder</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">jpeg_decoder</span><span class="o">&amp;</span><span class="p">);</span><span class="w"></span>
<a id="line-167" name="line-167"></a><span class="w">		</span><span class="n">jpeg_decoder</span><span class="o">&amp;</span><span class="w"> </span><span class="n">operator</span><span class="w"> </span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">jpeg_decoder</span><span class="o">&amp;</span><span class="p">);</span><span class="w"></span>
<a id="line-168" name="line-168"></a>
<a id="line-169" name="line-169"></a><span class="w">		</span><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">pDecode_block_func</span><span class="p">)(</span><span class="n">jpeg_decoder</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">);</span><span class="w"></span>
<a id="line-170" name="line-170"></a>
<a id="line-171" name="line-171"></a><span class="w">		</span><span class="k">struct</span><span class="w"> </span><span class="nc">huff_tables</span><span class="w"></span>
<a id="line-172" name="line-172"></a><span class="w">		</span><span class="p">{</span><span class="w"></span>
<a id="line-173" name="line-173"></a><span class="w">			</span><span class="kt">bool</span><span class="w"> </span><span class="n">ac_table</span><span class="p">;</span><span class="w"></span>
<a id="line-174" name="line-174"></a><span class="w">			</span><span class="n">uint</span><span class="w">  </span><span class="n">look_up</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<a id="line-175" name="line-175"></a><span class="w">			</span><span class="n">uint</span><span class="w">  </span><span class="n">look_up2</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<a id="line-176" name="line-176"></a><span class="w">			</span><span class="n">uint8</span><span class="w"> </span><span class="n">code_size</span><span class="p">[</span><span class="n">JPGD_HUFF_CODE_SIZE_MAX_LENGTH</span><span class="p">];</span><span class="w"></span>
<a id="line-177" name="line-177"></a><span class="w">			</span><span class="n">uint</span><span class="w">  </span><span class="n">tree</span><span class="p">[</span><span class="n">JPGD_HUFF_TREE_MAX_LENGTH</span><span class="p">];</span><span class="w"></span>
<a id="line-178" name="line-178"></a><span class="w">		</span><span class="p">};</span><span class="w"></span>
<a id="line-179" name="line-179"></a>
<a id="line-180" name="line-180"></a><span class="w">		</span><span class="k">struct</span><span class="w"> </span><span class="nc">coeff_buf</span><span class="w"></span>
<a id="line-181" name="line-181"></a><span class="w">		</span><span class="p">{</span><span class="w"></span>
<a id="line-182" name="line-182"></a><span class="w">			</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">pData</span><span class="p">;</span><span class="w"></span>
<a id="line-183" name="line-183"></a><span class="w">			</span><span class="kt">int</span><span class="w"> </span><span class="n">block_num_x</span><span class="p">,</span><span class="w"> </span><span class="n">block_num_y</span><span class="p">;</span><span class="w"></span>
<a id="line-184" name="line-184"></a><span class="w">			</span><span class="kt">int</span><span class="w"> </span><span class="n">block_len_x</span><span class="p">,</span><span class="w"> </span><span class="n">block_len_y</span><span class="p">;</span><span class="w"></span>
<a id="line-185" name="line-185"></a><span class="w">			</span><span class="kt">int</span><span class="w"> </span><span class="n">block_size</span><span class="p">;</span><span class="w"></span>
<a id="line-186" name="line-186"></a><span class="w">		</span><span class="p">};</span><span class="w"></span>
<a id="line-187" name="line-187"></a>
<a id="line-188" name="line-188"></a><span class="w">		</span><span class="k">struct</span><span class="w"> </span><span class="nc">mem_block</span><span class="w"></span>
<a id="line-189" name="line-189"></a><span class="w">		</span><span class="p">{</span><span class="w"></span>
<a id="line-190" name="line-190"></a><span class="w">			</span><span class="n">mem_block</span><span class="o">*</span><span class="w"> </span><span class="n">m_pNext</span><span class="p">;</span><span class="w"></span>
<a id="line-191" name="line-191"></a><span class="w">			</span><span class="kt">size_t</span><span class="w"> </span><span class="n">m_used_count</span><span class="p">;</span><span class="w"></span>
<a id="line-192" name="line-192"></a><span class="w">			</span><span class="kt">size_t</span><span class="w"> </span><span class="n">m_size</span><span class="p">;</span><span class="w"></span>
<a id="line-193" name="line-193"></a><span class="w">			</span><span class="kt">char</span><span class="w"> </span><span class="n">m_data</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a id="line-194" name="line-194"></a><span class="w">		</span><span class="p">};</span><span class="w"></span>
<a id="line-195" name="line-195"></a>
<a id="line-196" name="line-196"></a><span class="w">		</span><span class="kt">jmp_buf</span><span class="w"> </span><span class="n">m_jmp_state</span><span class="p">;</span><span class="w"></span>
<a id="line-197" name="line-197"></a><span class="w">		</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">m_flags</span><span class="p">;</span><span class="w"></span>
<a id="line-198" name="line-198"></a><span class="w">		</span><span class="n">mem_block</span><span class="o">*</span><span class="w"> </span><span class="n">m_pMem_blocks</span><span class="p">;</span><span class="w"></span>
<a id="line-199" name="line-199"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_image_x_size</span><span class="p">;</span><span class="w"></span>
<a id="line-200" name="line-200"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_image_y_size</span><span class="p">;</span><span class="w"></span>
<a id="line-201" name="line-201"></a><span class="w">		</span><span class="n">jpeg_decoder_stream</span><span class="o">*</span><span class="w"> </span><span class="n">m_pStream</span><span class="p">;</span><span class="w"></span>
<a id="line-202" name="line-202"></a>
<a id="line-203" name="line-203"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_progressive_flag</span><span class="p">;</span><span class="w"></span>
<a id="line-204" name="line-204"></a>
<a id="line-205" name="line-205"></a><span class="w">		</span><span class="n">uint8</span><span class="w"> </span><span class="n">m_huff_ac</span><span class="p">[</span><span class="n">JPGD_MAX_HUFF_TABLES</span><span class="p">];</span><span class="w"></span>
<a id="line-206" name="line-206"></a><span class="w">		</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">m_huff_num</span><span class="p">[</span><span class="n">JPGD_MAX_HUFF_TABLES</span><span class="p">];</span><span class="w">      </span><span class="c1">// pointer to number of Huffman codes per bit size</span>
<a id="line-207" name="line-207"></a><span class="w">		</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">m_huff_val</span><span class="p">[</span><span class="n">JPGD_MAX_HUFF_TABLES</span><span class="p">];</span><span class="w">      </span><span class="c1">// pointer to Huffman codes per bit size</span>
<a id="line-208" name="line-208"></a><span class="w">		</span><span class="n">jpgd_quant_t</span><span class="o">*</span><span class="w"> </span><span class="n">m_quant</span><span class="p">[</span><span class="n">JPGD_MAX_QUANT_TABLES</span><span class="p">];</span><span class="w"> </span><span class="c1">// pointer to quantization tables</span>
<a id="line-209" name="line-209"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_scan_type</span><span class="p">;</span><span class="w">                              </span><span class="c1">// Gray, Yh1v1, Yh1v2, Yh2v1, Yh2v2 (CMYK111, CMYK4114 no longer supported)</span>
<a id="line-210" name="line-210"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comps_in_frame</span><span class="p">;</span><span class="w">                         </span><span class="c1">// # of components in frame</span>
<a id="line-211" name="line-211"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comp_h_samp</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w">       </span><span class="c1">// component&#39;s horizontal sampling factor</span>
<a id="line-212" name="line-212"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comp_v_samp</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w">       </span><span class="c1">// component&#39;s vertical sampling factor</span>
<a id="line-213" name="line-213"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comp_quant</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w">        </span><span class="c1">// component&#39;s quantization table selector</span>
<a id="line-214" name="line-214"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comp_ident</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w">        </span><span class="c1">// component&#39;s ID</span>
<a id="line-215" name="line-215"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comp_h_blocks</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w"></span>
<a id="line-216" name="line-216"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comp_v_blocks</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w"></span>
<a id="line-217" name="line-217"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comps_in_scan</span><span class="p">;</span><span class="w">                          </span><span class="c1">// # of components in scan</span>
<a id="line-218" name="line-218"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comp_list</span><span class="p">[</span><span class="n">JPGD_MAX_COMPS_IN_SCAN</span><span class="p">];</span><span class="w">      </span><span class="c1">// components in this scan</span>
<a id="line-219" name="line-219"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comp_dc_tab</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w">       </span><span class="c1">// component&#39;s DC Huffman coding table selector</span>
<a id="line-220" name="line-220"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_comp_ac_tab</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w">       </span><span class="c1">// component&#39;s AC Huffman coding table selector</span>
<a id="line-221" name="line-221"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_spectral_start</span><span class="p">;</span><span class="w">                         </span><span class="c1">// spectral selection start</span>
<a id="line-222" name="line-222"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_spectral_end</span><span class="p">;</span><span class="w">                           </span><span class="c1">// spectral selection end</span>
<a id="line-223" name="line-223"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_successive_low</span><span class="p">;</span><span class="w">                         </span><span class="c1">// successive approximation low</span>
<a id="line-224" name="line-224"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_successive_high</span><span class="p">;</span><span class="w">                        </span><span class="c1">// successive approximation high</span>
<a id="line-225" name="line-225"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_max_mcu_x_size</span><span class="p">;</span><span class="w">                         </span><span class="c1">// MCU&#39;s max. X size in pixels</span>
<a id="line-226" name="line-226"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_max_mcu_y_size</span><span class="p">;</span><span class="w">                         </span><span class="c1">// MCU&#39;s max. Y size in pixels</span>
<a id="line-227" name="line-227"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_blocks_per_mcu</span><span class="p">;</span><span class="w"></span>
<a id="line-228" name="line-228"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_max_blocks_per_row</span><span class="p">;</span><span class="w"></span>
<a id="line-229" name="line-229"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_mcus_per_row</span><span class="p">,</span><span class="w"> </span><span class="n">m_mcus_per_col</span><span class="p">;</span><span class="w"></span>
<a id="line-230" name="line-230"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_mcu_org</span><span class="p">[</span><span class="n">JPGD_MAX_BLOCKS_PER_MCU</span><span class="p">];</span><span class="w"></span>
<a id="line-231" name="line-231"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_total_lines_left</span><span class="p">;</span><span class="w">                       </span><span class="c1">// total # lines left in image</span>
<a id="line-232" name="line-232"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_mcu_lines_left</span><span class="p">;</span><span class="w">                         </span><span class="c1">// total # lines left in this MCU</span>
<a id="line-233" name="line-233"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_num_buffered_scanlines</span><span class="p">;</span><span class="w"></span>
<a id="line-234" name="line-234"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_real_dest_bytes_per_scan_line</span><span class="p">;</span><span class="w"></span>
<a id="line-235" name="line-235"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_dest_bytes_per_scan_line</span><span class="p">;</span><span class="w">               </span><span class="c1">// rounded up</span>
<a id="line-236" name="line-236"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_dest_bytes_per_pixel</span><span class="p">;</span><span class="w">                   </span><span class="c1">// 4 (RGB) or 1 (Y)</span>
<a id="line-237" name="line-237"></a><span class="w">		</span><span class="n">huff_tables</span><span class="o">*</span><span class="w"> </span><span class="n">m_pHuff_tabs</span><span class="p">[</span><span class="n">JPGD_MAX_HUFF_TABLES</span><span class="p">];</span><span class="w"></span>
<a id="line-238" name="line-238"></a><span class="w">		</span><span class="n">coeff_buf</span><span class="o">*</span><span class="w"> </span><span class="n">m_dc_coeffs</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w"></span>
<a id="line-239" name="line-239"></a><span class="w">		</span><span class="n">coeff_buf</span><span class="o">*</span><span class="w"> </span><span class="n">m_ac_coeffs</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w"></span>
<a id="line-240" name="line-240"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_eob_run</span><span class="p">;</span><span class="w"></span>
<a id="line-241" name="line-241"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_block_y_mcu</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w"></span>
<a id="line-242" name="line-242"></a><span class="w">		</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">m_pIn_buf_ofs</span><span class="p">;</span><span class="w"></span>
<a id="line-243" name="line-243"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_in_buf_left</span><span class="p">;</span><span class="w"></span>
<a id="line-244" name="line-244"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_tem_flag</span><span class="p">;</span><span class="w"></span>
<a id="line-245" name="line-245"></a>
<a id="line-246" name="line-246"></a><span class="w">		</span><span class="n">uint8</span><span class="w"> </span><span class="n">m_in_buf_pad_start</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<a id="line-247" name="line-247"></a><span class="w">		</span><span class="n">uint8</span><span class="w"> </span><span class="n">m_in_buf</span><span class="p">[</span><span class="n">JPGD_IN_BUF_SIZE</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">128</span><span class="p">];</span><span class="w"></span>
<a id="line-248" name="line-248"></a><span class="w">		</span><span class="n">uint8</span><span class="w"> </span><span class="n">m_in_buf_pad_end</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span><span class="w"></span>
<a id="line-249" name="line-249"></a>
<a id="line-250" name="line-250"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_bits_left</span><span class="p">;</span><span class="w"></span>
<a id="line-251" name="line-251"></a><span class="w">		</span><span class="n">uint</span><span class="w"> </span><span class="n">m_bit_buf</span><span class="p">;</span><span class="w"></span>
<a id="line-252" name="line-252"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_restart_interval</span><span class="p">;</span><span class="w"></span>
<a id="line-253" name="line-253"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_restarts_left</span><span class="p">;</span><span class="w"></span>
<a id="line-254" name="line-254"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_next_restart_num</span><span class="p">;</span><span class="w"></span>
<a id="line-255" name="line-255"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_max_mcus_per_row</span><span class="p">;</span><span class="w"></span>
<a id="line-256" name="line-256"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_max_blocks_per_mcu</span><span class="p">;</span><span class="w"></span>
<a id="line-257" name="line-257"></a>
<a id="line-258" name="line-258"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_max_mcus_per_col</span><span class="p">;</span><span class="w"></span>
<a id="line-259" name="line-259"></a><span class="w">		</span><span class="n">uint</span><span class="w"> </span><span class="n">m_last_dc_val</span><span class="p">[</span><span class="n">JPGD_MAX_COMPONENTS</span><span class="p">];</span><span class="w"></span>
<a id="line-260" name="line-260"></a><span class="w">		</span><span class="n">jpgd_block_coeff_t</span><span class="o">*</span><span class="w"> </span><span class="n">m_pMCU_coefficients</span><span class="p">;</span><span class="w"></span>
<a id="line-261" name="line-261"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_mcu_block_max_zag</span><span class="p">[</span><span class="n">JPGD_MAX_BLOCKS_PER_MCU</span><span class="p">];</span><span class="w"></span>
<a id="line-262" name="line-262"></a><span class="w">		</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">m_pSample_buf</span><span class="p">;</span><span class="w"></span>
<a id="line-263" name="line-263"></a><span class="w">		</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">m_pSample_buf_prev</span><span class="p">;</span><span class="w"></span>
<a id="line-264" name="line-264"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_crr</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<a id="line-265" name="line-265"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_cbb</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<a id="line-266" name="line-266"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_crg</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<a id="line-267" name="line-267"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_cbg</span><span class="p">[</span><span class="mi">256</span><span class="p">];</span><span class="w"></span>
<a id="line-268" name="line-268"></a><span class="w">		</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">m_pScan_line_0</span><span class="p">;</span><span class="w"></span>
<a id="line-269" name="line-269"></a><span class="w">		</span><span class="n">uint8</span><span class="o">*</span><span class="w"> </span><span class="n">m_pScan_line_1</span><span class="p">;</span><span class="w"></span>
<a id="line-270" name="line-270"></a><span class="w">		</span><span class="n">jpgd_status</span><span class="w"> </span><span class="n">m_error_code</span><span class="p">;</span><span class="w"></span>
<a id="line-271" name="line-271"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="n">m_total_bytes_read</span><span class="p">;</span><span class="w"></span>
<a id="line-272" name="line-272"></a>
<a id="line-273" name="line-273"></a><span class="w">		</span><span class="kt">bool</span><span class="w"> </span><span class="n">m_ready_flag</span><span class="p">;</span><span class="w"></span>
<a id="line-274" name="line-274"></a><span class="w">		</span><span class="kt">bool</span><span class="w"> </span><span class="n">m_eof_flag</span><span class="p">;</span><span class="w"></span>
<a id="line-275" name="line-275"></a><span class="w">		</span><span class="kt">bool</span><span class="w"> </span><span class="n">m_sample_buf_prev_valid</span><span class="p">;</span><span class="w"></span>
<a id="line-276" name="line-276"></a><span class="w">		</span><span class="kt">bool</span><span class="w"> </span><span class="n">m_has_sse2</span><span class="p">;</span><span class="w"></span>
<a id="line-277" name="line-277"></a>
<a id="line-278" name="line-278"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">check_sample_buf_ofs</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">ofs</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">assert</span><span class="p">(</span><span class="n">ofs</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="n">assert</span><span class="p">(</span><span class="n">ofs</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">m_max_blocks_per_row</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">64</span><span class="p">);</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">ofs</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<a id="line-279" name="line-279"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">free_all_blocks</span><span class="p">();</span><span class="w"></span>
<a id="line-280" name="line-280"></a><span class="w">		</span><span class="n">JPGD_NORETURN</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">stop_decoding</span><span class="p">(</span><span class="n">jpgd_status</span><span class="w"> </span><span class="n">status</span><span class="p">);</span><span class="w"></span>
<a id="line-281" name="line-281"></a><span class="w">		</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">alloc</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
<a id="line-282" name="line-282"></a><span class="w">		</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="nf">alloc_aligned</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">nSize</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">align</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">zero</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">);</span><span class="w"></span>
<a id="line-283" name="line-283"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">word_clear</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">uint16</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="n">uint</span><span class="w"> </span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<a id="line-284" name="line-284"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">prep_in_buffer</span><span class="p">();</span><span class="w"></span>
<a id="line-285" name="line-285"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">read_dht_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-286" name="line-286"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">read_dqt_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-287" name="line-287"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">read_sof_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-288" name="line-288"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">skip_variable_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-289" name="line-289"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">read_dri_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-290" name="line-290"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">read_sos_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-291" name="line-291"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="nf">next_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-292" name="line-292"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="nf">process_markers</span><span class="p">();</span><span class="w"></span>
<a id="line-293" name="line-293"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">locate_soi_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-294" name="line-294"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">locate_sof_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-295" name="line-295"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="nf">locate_sos_marker</span><span class="p">();</span><span class="w"></span>
<a id="line-296" name="line-296"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">init</span><span class="p">(</span><span class="n">jpeg_decoder_stream</span><span class="o">*</span><span class="w"> </span><span class="n">pStream</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">flags</span><span class="p">);</span><span class="w"></span>
<a id="line-297" name="line-297"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">create_look_ups</span><span class="p">();</span><span class="w"></span>
<a id="line-298" name="line-298"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">fix_in_buffer</span><span class="p">();</span><span class="w"></span>
<a id="line-299" name="line-299"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">transform_mcu</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">mcu_row</span><span class="p">);</span><span class="w"></span>
<a id="line-300" name="line-300"></a><span class="w">		</span><span class="n">coeff_buf</span><span class="o">*</span><span class="w"> </span><span class="nf">coeff_buf_open</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">block_num_x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_num_y</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_len_x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_len_y</span><span class="p">);</span><span class="w"></span>
<a id="line-301" name="line-301"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="n">jpgd_block_coeff_t</span><span class="o">*</span><span class="w"> </span><span class="nf">coeff_buf_getp</span><span class="p">(</span><span class="n">coeff_buf</span><span class="o">*</span><span class="w"> </span><span class="n">cb</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_y</span><span class="p">);</span><span class="w"></span>
<a id="line-302" name="line-302"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">load_next_row</span><span class="p">();</span><span class="w"></span>
<a id="line-303" name="line-303"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">decode_next_row</span><span class="p">();</span><span class="w"></span>
<a id="line-304" name="line-304"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">make_huff_table</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="p">,</span><span class="w"> </span><span class="n">huff_tables</span><span class="o">*</span><span class="w"> </span><span class="n">pH</span><span class="p">);</span><span class="w"></span>
<a id="line-305" name="line-305"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">check_quant_tables</span><span class="p">();</span><span class="w"></span>
<a id="line-306" name="line-306"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">check_huff_tables</span><span class="p">();</span><span class="w"></span>
<a id="line-307" name="line-307"></a><span class="w">		</span><span class="kt">bool</span><span class="w"> </span><span class="nf">calc_mcu_block_order</span><span class="p">();</span><span class="w"></span>
<a id="line-308" name="line-308"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="nf">init_scan</span><span class="p">();</span><span class="w"></span>
<a id="line-309" name="line-309"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">init_frame</span><span class="p">();</span><span class="w"></span>
<a id="line-310" name="line-310"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">process_restart</span><span class="p">();</span><span class="w"></span>
<a id="line-311" name="line-311"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">decode_scan</span><span class="p">(</span><span class="n">pDecode_block_func</span><span class="w"> </span><span class="n">decode_block_func</span><span class="p">);</span><span class="w"></span>
<a id="line-312" name="line-312"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">init_progressive</span><span class="p">();</span><span class="w"></span>
<a id="line-313" name="line-313"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">init_sequential</span><span class="p">();</span><span class="w"></span>
<a id="line-314" name="line-314"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">decode_start</span><span class="p">();</span><span class="w"></span>
<a id="line-315" name="line-315"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">decode_init</span><span class="p">(</span><span class="n">jpeg_decoder_stream</span><span class="o">*</span><span class="w"> </span><span class="n">pStream</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">flags</span><span class="p">);</span><span class="w"></span>
<a id="line-316" name="line-316"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">H2V2Convert</span><span class="p">();</span><span class="w"></span>
<a id="line-317" name="line-317"></a><span class="w">		</span><span class="kt">uint32_t</span><span class="w"> </span><span class="nf">H2V2ConvertFiltered</span><span class="p">();</span><span class="w"></span>
<a id="line-318" name="line-318"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">H2V1Convert</span><span class="p">();</span><span class="w"></span>
<a id="line-319" name="line-319"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">H2V1ConvertFiltered</span><span class="p">();</span><span class="w"></span>
<a id="line-320" name="line-320"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">H1V2Convert</span><span class="p">();</span><span class="w"></span>
<a id="line-321" name="line-321"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">H1V2ConvertFiltered</span><span class="p">();</span><span class="w"></span>
<a id="line-322" name="line-322"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">H1V1Convert</span><span class="p">();</span><span class="w"></span>
<a id="line-323" name="line-323"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">gray_convert</span><span class="p">();</span><span class="w"></span>
<a id="line-324" name="line-324"></a><span class="w">		</span><span class="kt">void</span><span class="w"> </span><span class="nf">find_eoi</span><span class="p">();</span><span class="w"></span>
<a id="line-325" name="line-325"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="n">uint</span><span class="w"> </span><span class="nf">get_char</span><span class="p">();</span><span class="w"></span>
<a id="line-326" name="line-326"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="n">uint</span><span class="w"> </span><span class="nf">get_char</span><span class="p">(</span><span class="kt">bool</span><span class="o">*</span><span class="w"> </span><span class="n">pPadding_flag</span><span class="p">);</span><span class="w"></span>
<a id="line-327" name="line-327"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">stuff_char</span><span class="p">(</span><span class="n">uint8</span><span class="w"> </span><span class="n">q</span><span class="p">);</span><span class="w"></span>
<a id="line-328" name="line-328"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="n">uint8</span><span class="w"> </span><span class="nf">get_octet</span><span class="p">();</span><span class="w"></span>
<a id="line-329" name="line-329"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="n">uint</span><span class="w"> </span><span class="nf">get_bits</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">num_bits</span><span class="p">);</span><span class="w"></span>
<a id="line-330" name="line-330"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="n">uint</span><span class="w"> </span><span class="nf">get_bits_no_markers</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">numbits</span><span class="p">);</span><span class="w"></span>
<a id="line-331" name="line-331"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">huff_decode</span><span class="p">(</span><span class="n">huff_tables</span><span class="o">*</span><span class="w"> </span><span class="n">pH</span><span class="p">);</span><span class="w"></span>
<a id="line-332" name="line-332"></a><span class="w">		</span><span class="kr">inline</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">huff_decode</span><span class="p">(</span><span class="n">huff_tables</span><span class="o">*</span><span class="w"> </span><span class="n">pH</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">extrabits</span><span class="p">);</span><span class="w"></span>
<a id="line-333" name="line-333"></a>
<a id="line-334" name="line-334"></a><span class="w">		</span><span class="c1">// Clamps a value between 0-255.</span>
<a id="line-335" name="line-335"></a><span class="w">		</span><span class="k">static</span><span class="w"> </span><span class="kr">inline</span><span class="w"> </span><span class="n">uint8</span><span class="w"> </span><span class="nf">clamp</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"></span>
<a id="line-336" name="line-336"></a><span class="w">		</span><span class="p">{</span><span class="w"></span>
<a id="line-337" name="line-337"></a><span class="w">			</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">static_cast</span><span class="o">&lt;</span><span class="n">uint</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">255</span><span class="p">)</span><span class="w"></span>
<a id="line-338" name="line-338"></a><span class="hll"><span class="w">				</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(((</span><span class="o">~</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFF</span><span class="p">);</span><span class="w"></span><span class="error2">&lt;--- Shift</span>
</span><a id="line-339" name="line-339"></a><span class="w">			</span><span class="k">return</span><span class="w"> </span><span class="n">static_cast</span><span class="o">&lt;</span><span class="n">uint8</span><span class="o">&gt;</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<a id="line-340" name="line-340"></a><span class="w">		</span><span class="p">}</span><span class="w"></span>
<a id="line-341" name="line-341"></a><span class="w">		</span><span class="kt">int</span><span class="w"> </span><span class="nf">decode_next_mcu_row</span><span class="p">();</span><span class="w"></span>
<a id="line-342" name="line-342"></a>
<a id="line-343" name="line-343"></a><span class="w">		</span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">decode_block_dc_first</span><span class="p">(</span><span class="n">jpeg_decoder</span><span class="o">*</span><span class="w"> </span><span class="n">pD</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">component_id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_y</span><span class="p">);</span><span class="w"></span>
<a id="line-344" name="line-344"></a><span class="w">		</span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">decode_block_dc_refine</span><span class="p">(</span><span class="n">jpeg_decoder</span><span class="o">*</span><span class="w"> </span><span class="n">pD</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">component_id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_y</span><span class="p">);</span><span class="w"></span>
<a id="line-345" name="line-345"></a><span class="w">		</span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">decode_block_ac_first</span><span class="p">(</span><span class="n">jpeg_decoder</span><span class="o">*</span><span class="w"> </span><span class="n">pD</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">component_id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_y</span><span class="p">);</span><span class="w"></span>
<a id="line-346" name="line-346"></a><span class="w">		</span><span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">decode_block_ac_refine</span><span class="p">(</span><span class="n">jpeg_decoder</span><span class="o">*</span><span class="w"> </span><span class="n">pD</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">component_id</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">block_y</span><span class="p">);</span><span class="w"></span>
<a id="line-347" name="line-347"></a><span class="w">	</span><span class="p">};</span><span class="w"></span>
<a id="line-348" name="line-348"></a>
<a id="line-349" name="line-349"></a><span class="p">}</span><span class="w"> </span><span class="c1">// namespace jpgd</span>
<a id="line-350" name="line-350"></a>
<a id="line-351" name="line-351"></a><span class="cp">#endif </span><span class="c1">// JPEG_DECODER_H</span>
</pre></div>
</td></tr></table>
    </div>
    <div id="footer" class="footer">
      <p>
        Created by Cppcheck 2.7 (<a href="https://cppcheck.sourceforge.io">Sourceforge</a>, <a href="irc://irc.freenode.net/cppcheck">IRC</a>)
      </p>
    </div>
    </div>
  </body>
</html>
